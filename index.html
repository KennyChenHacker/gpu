<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-TREME GPU BENCHMARK</title>
    <style>
        body { margin: 0; background: #000; color: #ff003c; font-family: 'Courier New', monospace; overflow: hidden; }
        canvas { display: block; width: 100vw; height: 100vh; }
        
        #overlay {
            position: absolute; top: 15px; left: 15px;
            background: rgba(10, 0, 0, 0.85); padding: 20px;
            border: 2px solid #ff003c; border-radius: 10px; pointer-events: none;
            box-shadow: 0 0 15px rgba(255, 0, 60, 0.5);
        }

        .stat { font-size: 16px; margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }
        #fps { color: #fff; font-weight: bold; font-size: 32px; text-shadow: 0 0 10px #ff003c; }
        
        .controls {
            position: absolute; bottom: 30px; left: 50%;
            transform: translateX(-50%); display: flex; gap: 15px;
        }
        button {
            padding: 12px 24px; background: #000; color: #ff003c;
            border: 2px solid #ff003c; cursor: pointer; font-family: inherit;
            font-weight: bold; transition: all 0.2s;
        }
        button:hover { background: #ff003c; color: #000; }
        button:active { transform: scale(0.9); }

        #warning {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: red; color: white; padding: 20px; display: none;
            font-weight: bold; text-align: center; border: 5px white solid;
        }
    </style>
</head>
<body>

<div id="overlay">
    <div class="stat">System FPS: <span id="fps">--</span></div>
    <div class="stat" id="load-text">TARGET: A19 PRO / DESKTOP GPU</div>
    <div class="stat" id="res-text">RENDER: 4x SUPERSAMPLED</div>
</div>

<div id="warning">⚠️ THERMAL ALERT: DEVICE LAG DETECTED ⚠️</div>

<div class="controls">
    <button onclick="setIterations(16, 1)">LOW (A15)</button>
    <button onclick="setIterations(64, 2)">MID (A18)</button>
    <button onclick="setIterations(150, 4)">ULTRA (A19 PRO)</button>
</div>

<canvas id="glCanvas"></canvas>

<script>
    const canvas = document.getElementById('glCanvas');
    const gl = canvas.getContext('webgl');
    const fpsDisplay = document.getElementById('fps');
    const warning = document.getElementById('warning');
    let program;

    const vsSource = `attribute vec2 pos; void main() { gl_Position = vec4(pos, 0, 1); }`;

    const getFsSource = (iters, ssaa) => `
        precision highp float;
        uniform float uTime;
        uniform vec2 uRes;

        float map(vec3 p) {
            vec3 z = p;
            float dr = 1.0, r = 0.0;
            for (int i = 0; i < ${iters}; i++) {
                r = length(z);
                if (r > 4.0) break;
                float theta = acos(z.z/r) * 8.0 + uTime * 0.05;
                float phi = atan(z.y, z.x) * 8.0;
                dr = pow(r, 7.0) * 8.0 * dr + 1.0;
                float zr = pow(r, 8.0);
                z = zr * vec3(sin(theta)*cos(phi), sin(phi)*sin(theta), cos(theta)) + p;
            }
            return 0.5 * log(r) * r / dr;
        }

        vec3 getNormal(vec3 p) {
            vec2 e = vec2(0.001, 0);
            return normalize(vec3(map(p+e.xyy)-map(p-e.xyy), map(p+e.yxy)-map(p-e.yxy), map(p+e.yyx)-map(p-e.yyx)));
        }

        void main() {
            vec3 finalCol = vec3(0.0);
            float d_size = 1.0 / float(${ssaa});
            
            // X-TREME: Supersampling Loop
            for(int m=0; m < ${ssaa}; m++) {
                vec2 uv = (gl_FragCoord.xy + vec2(float(m)*d_size) - 0.5 * uRes.xy) / uRes.y;
                vec3 ro = vec3(3.0 * cos(uTime*0.2), 1.5, 3.0 * sin(uTime*0.2));
                vec3 cw = normalize(-ro), cu = normalize(cross(cw, vec3(0,1,0))), cv = cross(cu, cw);
                vec3 rd = normalize(uv.x*cu + uv.y*cv + 1.8*cw);
                
                float t = 0.0;
                for(int i=0; i<100; i++) {
                    float h = map(ro + rd*t);
                    if(h < 0.0005 || t > 8.0) break;
                    t += h;
                }
                if(t < 8.0) {
                    vec3 n = getNormal(ro + rd*t);
                    float diff = max(dot(n, vec3(0.5, 1, 0.5)), 0.0);
                    finalCol += vec3(0.8, 0.1, 0.2) * diff + 0.1;
                }
            }
            gl_FragColor = vec4(finalCol / float(${ssaa}), 1.0);
        }
    `;

    function initShader(iters, ssaa) {
        const vs = gl.createShader(gl.VERTEX_SHADER);
        gl.shaderSource(vs, vsSource); gl.compileShader(vs);
        const fs = gl.createShader(gl.FRAGMENT_SHADER);
        gl.shaderSource(fs, getFsSource(iters, ssaa)); gl.compileShader(fs);
        
        program = gl.createProgram();
        gl.attachShader(program, vs); gl.attachShader(program, fs);
        gl.linkProgram(program);
        gl.useProgram(program);
    }

    function setIterations(n, ssaa) {
        initShader(n, ssaa);
        document.getElementById('load-text').innerText = "LOAD: " + n + " Iters";
        document.getElementById('res-text').innerText = "RENDER: " + ssaa + "x Supersampling";
    }

    let lastTime = 0, frameCount = 0;
    function render(now) {
        now *= 0.001;
        const delta = now - lastTime;
        frameCount++;

        if (delta >= 1.0) {
            let fps = Math.round(frameCount / delta);
            fpsDisplay.innerText = fps;
            warning.style.display = fps < 15 ? "block" : "none";
            frameCount = 0;
            lastTime = now;
        }

        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        gl.viewport(0, 0, canvas.width, canvas.height);
        
        const posLoc = gl.getAttribLocation(program, "pos");
        const buf = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, buf);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]), gl.STATIC_DRAW);
        gl.enableVertexAttribArray(posLoc);
        gl.vertexAttribPointer(posLoc, 2, gl.FLOAT, false, 0, 0);

        gl.uniform1f(gl.getUniformLocation(program, "uTime"), now);
        gl.uniform2f(gl.getUniformLocation(program, "uRes"), canvas.width, canvas.height);
        gl.drawArrays(gl.TRIANGLES, 0, 6);
        requestAnimationFrame(render);
    }

    initShader(64, 2); // Default to Mid
    requestAnimationFrame(render);
</script>
</body>
</html>